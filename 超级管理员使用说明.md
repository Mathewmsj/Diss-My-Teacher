# 超级管理员系统使用说明

## 功能概述

超级管理员系统提供了对整个平台的完全控制权限，包括：

### 1. 系统统计
- 学校总数、老师总数、用户总数
- 管理员数量、评分总数
- 今日评分数、待审批用户数等

### 2. 学校管理
- ✅ 创建新学校
- ✅ 编辑学校信息（名称、地址、每日评分上限）
- ✅ 删除学校

### 3. 用户管理
- ✅ 查看所有用户（包括完整信息）
- ✅ 创建新的管理员账号
- ✅ 编辑用户信息（用户名、邮箱、角色、状态等）
- ✅ 删除用户（包括管理员，但不能删除自己）

### 4. 评分管理
- ✅ 查看所有评分（包括匿名背后的真实用户信息）
- ✅ 查看每条评分的详细信息
- ✅ 查看点赞/点踩的用户列表（完整信息）

## 创建第一个超级管理员

在 Django shell 中执行：

```python
python manage.py shell
```

然后执行：

```python
from api.models import User

# 创建超级管理员
superadmin = User.objects.create_user(
    username='superadmin',
    email='superadmin@example.com',
    password='your_password_here',
    is_superuser=True,
    is_staff=True,
    is_active=True,
    is_approved=True,
    can_rate=True,
    approval_status='approved'
)
print(f'超级管理员创建成功: {superadmin.username}')
```

## 登录方式

1. 打开登录页面
2. 选择"超级管理员"选项
3. 输入超级管理员用户名和密码
4. 登录成功后自动跳转到超级管理员控制台

## 权限说明

- **超级管理员**：可以管理所有内容，包括学校、用户、评分等
- **普通管理员**：只能管理自己学校的用户和老师
- **普通用户**：只能评分和查看公开信息

## 安全提示

1. 超级管理员账号权限极高，请妥善保管密码
2. 系统会防止删除最后一个超级管理员
3. 超级管理员不能删除自己的账号
4. 建议定期检查系统统计，监控异常活动

## API 接口

所有超级管理员接口都在 `/api/superadmin/` 路径下：
- `GET /api/superadmin/stats/` - 系统统计
- `GET /api/superadmin/all_ratings/` - 所有评分（含完整用户信息）
- `GET /api/superadmin/all_users/` - 所有用户
- `GET /api/superadmin/all_schools/` - 所有学校
- `POST /api/superadmin/create_school/` - 创建学校
- `POST /api/superadmin/create_admin/` - 创建管理员
- `POST /api/superadmin/{id}/update_user/` - 更新用户
- `DELETE /api/superadmin/{id}/delete_user/` - 删除用户
- `POST /api/superadmin/{school_code}/update_school/` - 更新学校
- `DELETE /api/superadmin/{school_code}/delete_school/` - 删除学校

## 注意事项

1. 所有操作都会记录在服务器日志中
2. 删除操作不可恢复，请谨慎操作
3. 修改用户密码后，用户需要使用新密码登录
4. 停用用户后，该用户将无法登录系统
