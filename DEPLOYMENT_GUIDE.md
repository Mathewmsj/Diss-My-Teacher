# 部署端口分配指南

## 端口分配方案

### 方案1：前端域名 + 后端域名（推荐）
**适用场景**：老师分配了两个端口，或nginx可以路由不同路径

- **前端端口**：8807（通过 `mathew.yunguhs.com` 访问）
- **后端端口**：8806（通过 `mathew.yunguhs.com/api` 访问）

**启动命令**：
```bash
./start.sh 8806 8807
```

**访问方式**：
- 前端：`http://mathew.yunguhs.com` → nginx转发到8807
- 后端：`http://mathew.yunguhs.com/api` → nginx转发到8806

---

### 方案2：前端域名 + 后端IP（当前配置）
**适用场景**：老师只分配了一个端口8806给后端

- **前端端口**：5010（通过IP `110.40.153.38:5010` 访问）
- **后端端口**：8806（通过域名 `mathew.yunguhs.com/api` 访问）

**启动命令**：
```bash
./start.sh 8806 5010
```

**访问方式**：
- 前端：`http://110.40.153.38:5010`
- 后端：`http://mathew.yunguhs.com/api` → nginx转发到8806

---

### 方案3：前端域名 + 后端域名（同一端口，nginx路由）
**适用场景**：老师只分配了一个端口，但nginx可以路由

- **前端端口**：8806（通过 `mathew.yunguhs.com` 访问）
- **后端端口**：8806（通过 `mathew.yunguhs.com/api` 访问）

**启动命令**：
```bash
./start.sh 8806 8806
```

**注意**：这需要nginx配置将 `/api` 路径转发到后端，根路径转发到前端

---

### 方案4：前端IP + 后端IP
**适用场景**：不使用域名，直接IP访问

- **前端端口**：5010
- **后端端口**：5009

**启动命令**：
```bash
./start.sh 5009 5010
```

**访问方式**：
- 前端：`http://110.40.153.38:5010`
- 后端：`http://110.40.153.38:5009/api`

---

## 如何选择方案？

1. **如果老师分配了两个端口**（如8806和8807）：
   - 使用方案1：`./start.sh 8806 8807`

2. **如果老师只分配了一个端口**（如8806）：
   - 使用方案2：`./start.sh 8806 5010`（前端用IP访问）
   - 或方案3：`./start.sh 8806 8806`（如果nginx可以路由）

3. **如果不确定**：
   - 先尝试方案1，如果不行再试方案2

## 检查nginx配置

如果使用域名访问，需要确认nginx配置：

```nginx
# 前端路由
location / {
    proxy_pass http://127.0.0.1:前端端口;
}

# 后端API路由
location /api {
    proxy_pass http://127.0.0.1:后端端口;
}
```

## 前端API配置

前端会自动检测访问方式：
- 通过域名访问时，使用相对路径 `/api`（nginx转发）
- 通过IP访问时，使用域名访问后端 `http://mathew.yunguhs.com/api`

